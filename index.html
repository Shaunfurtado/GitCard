<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="globals.css" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <div   
 class="form-container">
    <h2>Enter GitHub Username and Token</h2>
    <form id="github-form">
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" required>
      <br>
      <label for="token">Token:</label>
      <input type="password" id="token" name="token" required>
      <br>
      <button type="submit">Submit and Display Stats</button>
    </form>
  </div>
    
    <div id="github-card" class="github-card">
      <div class="text-description">
        <div class="overlap-group">
          <p class="text-wrapper">
            <span id="bio"></span>
          </p>
          <div class="total-repositories">
            <div class="div">
              Total Repositories: <span id="total-repos-value"></span><span id="total-commits-current-year"></span></span>
            </div>
          </div>
          <div class="following">
            <div class="text-wrapper-2">
              Following: <span id="following-value"></span>
            </div>
          </div>
          <div class="followers">
            <div class="followers-2">
              Followers: <span id="followers-value"></span>
            </div>
          </div>
        </div>
        <div class="text-wrapper-3"><span id="full-name"></span></div>
      </div>
      <img id="profile-picture" src="" class="avatar" alt="GitHub Profile Picture" />
      <div class="card">
        <div class="overlap">
          <div class="text-wrapper-5">Commit Graph:</div>
          <div class="overlap-2">
            <div class="graph">
              <div class="overlap-group-2">
                <img class="curved-graph" src="img/curved-graph.svg" />
                <img class="dots" src="img/dots.png" />
              </div>
            </div>
            <div class="text-wrapper-6">Last 30 days</div>
          </div>  
        </div>
      </div>
      <div class="card-2">
        <div class="ranking">
          <div class="a-wrapper"><div class="a"><span id="rank"></span></div></div>
        </div>
        <div class="group">
          <div class="text-wrapper-7">Contributed to(repos):</div>
          <img class="git-commit" src="img/git-commit.svg" />
          <div class="text-wrapper-8">
            <span id="total-contributed-repos"></span>
          </div>
        </div>
        <div class="group-2">
          <div class="text-wrapper-9">Total Commits(<span id="previous-year"></span>):</div>
          <img class="img" src="img/git-merge.svg" />
          <div class="text-wrapper-10"><span id="total-commits-last-year"></span></div>
        </div>
        <div class="overlap-3">
          <div class="group-3">
            <div class="text-wrapper-11">Total PRs:</div>
            <img class="img" src="img/git-pull-request.svg" />
            <div class="text-wrapper-12"><span id="total-prs"></span></div>
          </div>
          <div class="group-4">
            <img class="star" src="img/star.svg" />
            <div class="text-wrapper-13">
              <span id="total-stars-value"></span>
            </div>
            <div class="text-wrapper-14">Total Stars:</div>
          </div>
        </div>
      </div>
      <div class="overlap-wrapper">
        <div class="overlap-4">
          <div class="group-5">
            <div class="overlap-group-wrapper">
              <div class="overlap-group-3">
                <img class="github" src="img/github.svg" />
                <div class="text-wrapper-15">Twitter-Bot</div>
              </div>
            </div>
            <div class="div-wrapper">
              <div class="overlap-group-3">
                <img class="github" src="img/github-1.svg" />
                <div class="text-wrapper-15">FlowChain</div>
              </div>
            </div>
            <div class="group-6">
              <div class="overlap-group-3">
                <img class="github-2" src="img/github-2.svg" />
                <div class="text-wrapper-15">CodeTrek</div>
              </div>
            </div>
            <div class="group-7">
              <div class="overlap-group-3">
                <img class="github" src="img/github-3.svg" />
                <div class="text-wrapper-15">ConferEase</div>
              </div>
            </div>
          </div>
          <div class="text-wrapper-16">Top Repositories:</div>
        </div>
      </div>
      <div class="card-3">
        <div class="overlap-4">
          <p class="p"><span id="streak-duration"></span></p>
          <div class="overlap-group-4">
            <div class="text-wrapper-17">Longest Streak</div>
            <div class="text-wrapper-18"><span id="longest-streak"></span></div>
            <img class="circle" src="img/circle.svg" />
          </div>
        </div>
      </div>
      <div class="card-4">
        <div class="overlap-4">
          <p class="text-wrapper-19"><span id="joined-date"></span></p>
          <div class="text-wrapper-20">Total Contributions</div>
          <div class="text-wrapper-21"><span id="total-commits"></span></div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/dom-to-image/dist/dom-to-image.min.js"></script>
    <br><br><button onclick="exportToSVG()">Export to SVG</button><br>
    <br><img src="./github-card.svg" alt="github-card" />
    <script src="stats.js"></script>
    <script>
      const form = document.getElementById('github-form');

    form.addEventListener('submit', async (event) => {
      event.preventDefault(); // Prevent default form submission behavior

      const username = document.getElementById('username').value;
      const   
 token = document.getElementById('token').value;

      // Update stats.js to use submitted username and token
      window.GITHUB_USERNAME = username;
      window.GITHUB_TOKEN = token;

      // Call displayStats function
      displayStats();
    });
      function exportToSVG() {
        domtoimage
          .toSvg(document.getElementById("github-card"))
          .then(function (dataUrl) {
            var link = document.createElement("a");
            link.download = "github-card.svg";
            link.href = dataUrl;
            link.click();
          })
          .catch(function (error) {
            console.error("Error exporting to SVG:", error);
          });
      }
    </script>
  </body>
</html>
